С_И_С_Т_Е_М_А  У_П_Р_А_В_Л_Е_Н_И_Я  Ф_А_Й_Л_О_В_Ы_М  П_Р_Е_Д_С_Т_А_В_Л_Е_Н_И_Е_М  Ф_О_Т_О_Г_Р_А_Ф_И_Й


Версия: 0.0.0^


————————————————


П Р И Ч И Н Ы


1. Необходимость устранения или сведения к минимуму вероятности сосуществования в как можно бользих границах файлов фотографий с одинаковыми именами, т. к. в этих случаях у управляющих цифровых систем отсутствует способность их различения и возникает угроза потери обозначенных файлов.
2. Необходимость в едином стандарте хранения файлового представления фотографий в среде цифровыми системами, основанных на неповторимости имён файлов.


Н А П Р А В Л Е Н И Е  Р Е Ш Е Н И Я


Создание системы управления файловым представлением фотографий, абсолютно или достаточно относительно исключающей возникновение одноимённых файлов.


Т Р Е Б О В А Н И Я  К  Р Е Ш Е Н И Ю


Решение не должно ограничивать условия создания и использования raw-файлов.


***


Т Е О Р И Я


• Условия съёмки предполагаются желательно в пределах одного часового пояса на планете Земля.
• Из-за разнообразия состава и содержимого метаданных от разных производителей, предполагается возможная необходимость приспособления системы для отдельных камер.
• Все снимки имеют полноценное количество достоверных первоначальных метаданных.
• Правила не строгие и только основа, при необходимости или желании всё может быть изменено под вашу ответственность.
• Должна быть промежуточная папка для сбора raw-файлов перед их упорядочиванием и использованием:

НОСИТЕЛЬ\_\

• Структура папок и файлов должна быть в корне носителя.
Это необходимо для уменьшения длинны полного имени файлов; например, Windows позволяет мксимум 260 символов для полного имени.
• Используются только латиница и некоторые другие символы:

a-Z, 0-9, _

• Названия и иерархия папок основываются на хронологии снимков, т. к. она более чем другие параметры предрасположена к однозначности и наглядности совместно:

НОСИТЕЛЬ\ГГГГ\ГГГГММДД\СНИМОК

• Для создания имён raw-файлов используются только следующие, способные быть известными для съёмки, метаданные, которые выбраны из-за их постоянности и в совокупности достаточны для относительной глобальной уникальности:

20190718 — дата.
032000 — время.
f0300 или b0230 — часовой пояс (f — forward (вперёд), b — backward (назад)). Задаётся вручную, если он не прописан в метаданные камерой автоматически.
CanonEOS5DMarkIV — модель камеры (этим можно пренебречь и использовать только серийный номер камеры, вероятность совпадения которого с серийными номерами от других производителей ничтожна).
ZA2561817 — внутренний серийный номер или серийный номер камеры (желательно выбрать тот, который из них короче).
IMG_0024 — первое название снимка (возможно, вам придется добавить его самостоятельно, но некоторые камеры пишут что-то подобное в метаданных, например FileNumber:100-0024 в IMG_0024.cr2).
v02 — версия результата для производных raw-файлов (v — version (версия)).
 
• Некоторые камеры не записывают некоторые метаданные, например, часовой пояс, тогда эти метаданные придётся добавлять самостоятельно.


***


П Р И М Е Р Ы


ПОЛНОЕ СООТВЕТСТВИЕ ОСНОВЕ СИСТЕМЫ ИМЕНОВАНИЯ


D:\2019\20190718\…:
• …20190718_032000_f0300_CanonEOS5DMarkIV_ZA2561817_IMG_0024.cr2
• …20190718_032000_f0300_CanonEOS5DMarkIV_ZA2561817_IMG_0024.psd
• …20190718_032000_f0300_CanonEOS5DMarkIV_ZA2561817_IMG_0024_v02.psd
• …20190718_032000_f0300_CanonEOS5DMarkIV_ZA2561817_IMG_0024.jpg
• …20190718_032000_f0300_CanonEOS5DMarkIV_ZA2561817_IMG_0024_v02.jpg


ПОЛЬЗОВАТЕЛЬСКИЕ ОТСТУПЛЕНИЯ


• D:\2019\20190718\20190718_032000_f0300_ZA2561817_IMG_0024.cr2
• D:\2019\20190718\20190718_032000_f0300_ZA2561817_IMG_0024_v02.jpg
• D:\2019\20190718_Minsk\20190718_032000_f0300_CanonEOS5DMarkIVZA2561817IMG0024.cr2
• D:\2019\20190718_Photography_workshop\20190718032000_f0300ZA2561817IMG0024.cr2
• D:\2019\20190718\20190718_032000f0300_IMG0024.cr2
• D:\2019\20190718\20190718_IMG0024.cr2 (это один из вариантов с низкой уникальностью названия, который не рекомендуется)


***


П Р А К Т И К А


В основе практической реализации лежит приложение ExifTool
https://owl.phy.queensu.ca/~phil/exiftool
от Фила Харви (Phil Harvey).


ПРИМЕР ШАГОВ ДЛЯ УПОРЯДОЧИВАНИЯ И ИМЕНОВАНИЯ RAW-ФАЙЛОВ И ИХ ПРОИЗВОДНЫХ


Примеры команд приведены для камеры CANON EOS 600D (расширение raw-файлов .CR2).


• Сбор raw-файлов в промежуточной папке.
• Удаление ненужных raw-файлов.
• Занесение информации об авторских правах на raw-файлы в их метаданные.

exiftool -r -progress -artist="Author Name" -copyright="Author Name" -by-line="Author Name" -copyrightnotice="Author Name" -creator="Author Name" -rights="Author Name" *.cr2

• Занесение оригинального названия raw-файлов в их метаданные.

exiftool -r -P -overwrite_original -wm cg -progress "-IPTC:ObjectName<Filename" "-XMP:PreservedFileName<Filename" "-XMP:CameraFilename<Filename" "-XMP:OriginalFileName<Filename" "-XMP:RawFileName<Filename" *.cr2

• Распределение с переименованием оставшихся raw-файлов по структуре папок.

exiftool -r -d "%Y/%Y%m%d/%Y%m%d_%H%M%S" "-FileName<D:\${DateTimeOriginal}_f0300_${Model;s/ //g}_${InternalSerialNumber}_${FileName}" *.cr2

…D:\… — буква диска задаётся вручную.

• Создание производных raw-файлов (производные создаются в той же папке, что и raw-файлы, а так же получают уточнённое имя при необходимости, например, с добавлением версии).


————————————————


© Андрей Коржиц, Елена Абражевич, 2019–∞
gmail: andreikorzhyts